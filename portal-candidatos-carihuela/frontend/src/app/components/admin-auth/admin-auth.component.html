<div class="flex items-center justify-center min-h-screen bg-slate-100 p-4">
    <div class="absolute top-4 right-4">
        <app-language-switcher></app-language-switcher>
    </div>
    <div class="w-full max-w-md bg-white p-12 rounded-lg shadow-xl border-t-4 border-[#003366]">
        <div class="text-center mb-8">
            <div class="flex justify-center mb-6">
                <img src="assets/img/logo-carihuela.png" alt="Logo Carihuela" class="h-14 w-auto">
            </div>
            <h1 class="text-3xl font-bold text-slate-800">{{ t().adminAuth.title }}</h1>
            <p class="text-slate-500 mt-2">{{ t().adminAuth.subtitle }}</p>
        </div>

        @if (errorMessage()) {
        <div class="bg-red-50 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded shadow-sm animate-in fade-in duration-300"
            role="alert">
            <div class="flex items-center">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd"
                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                        clip-rule="evenodd"></path>
                </svg>
                <span class="block sm:inline font-medium">{{ errorMessage() }}</span>
            </div>
        </div>
        }

        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
            <div class="mb-5">
                <label for="email" class="block text-sm font-bold text-slate-700 mb-2">{{ t().adminAuth.email }}</label>
                <input id="email" type="email" formControlName="email"
                    [class]="'w-full px-4 py-2 rounded-md bg-white text-slate-900 placeholder-slate-400 border focus:outline-none focus:ring-1 ' + (emailControl?.invalid && emailControl?.touched ? 'border-red-500 ring-red-500' : 'border-slate-300 focus:border-[#003366] focus:ring-[#003366]')" />

                @if (emailControl?.invalid && (emailControl?.dirty || emailControl?.touched)) {
                <div class="text-red-600 text-xs mt-1.5 font-medium">
                    @if (emailControl?.errors?.['required']) { <p>{{ t().adminAuth.errors.emailRequired }}</p> }
                    @if (emailControl?.errors?.['email']) { <p>{{ t().adminAuth.errors.emailInvalid }}</p> }
                </div>
                }
            </div>

            <div class="mb-8">
                <label for="password" class="block text-sm font-bold text-slate-700 mb-2">{{ t().adminAuth.password
                    }}</label>
                <input id="password" type="password" formControlName="password"
                    [class]="'w-full px-4 py-2 rounded-md bg-white text-slate-900 placeholder-slate-400 border focus:outline-none focus:ring-1 ' + (passwordControl?.invalid && passwordControl?.touched ? 'border-red-500 ring-red-500' : 'border-slate-300 focus:border-[#003366] focus:ring-[#003366]')" />

                @if (passwordControl?.invalid && (passwordControl?.dirty || passwordControl?.touched)) {
                <div class="text-red-600 text-xs mt-1.5 font-medium">
                    @if (passwordControl?.errors?.['required']) { <p>{{ t().adminAuth.errors.required }}</p> }
                </div>
                }
            </div>

            <div>
                <button type="submit" [disabled]="loginForm.invalid || isLoading()"
                    class="w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-md shadow-md text-sm font-bold text-white bg-[#003366] hover:bg-[#002244] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#003366] disabled:bg-slate-300 disabled:cursor-not-allowed transition-all duration-200">
                    @if (isLoading()) {
                    <app-loading-spinner [size]="'sm'"></app-loading-spinner>
                    <span class="ml-2 uppercase tracking-wider">{{ t().adminAuth.loggingIn }}</span>
                    } @else {
                    <span class="uppercase tracking-wider">{{ t().adminAuth.login }}</span>
                    }
                </button>
            </div>
        </form>
    </div>
</div>