<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MODULO RRHH - TRABAJADORES - ModuloRRHH</title>
    <style>

@page {
    size: A4;
    margin: 2cm;
    @bottom-right {
        content: "Página " counter(page) " de " counter(pages);
        font-size: 9pt;
        color: #666;
    }
    @bottom-left {
        content: "ModuloRRHH - Pescados La Carihuela";
        font-size: 9pt;
        color: #666;
    }
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-size: 11pt;
    line-height: 1.6;
    color: #333;
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
}

h1 {
    color: #1a5276;
    border-bottom: 3px solid #1a5276;
    padding-bottom: 10px;
    margin-top: 0;
}

h2 {
    color: #2874a6;
    border-bottom: 1px solid #aed6f1;
    padding-bottom: 5px;
    margin-top: 30px;
}

h3 {
    color: #3498db;
    margin-top: 25px;
}

h4 {
    color: #5dade2;
    margin-top: 20px;
}

table {
    border-collapse: collapse;
    width: 100%;
    margin: 15px 0;
    font-size: 10pt;
}

th, td {
    border: 1px solid #bdc3c7;
    padding: 8px 12px;
    text-align: left;
}

th {
    background-color: #2874a6;
    color: white;
    font-weight: bold;
}

tr:nth-child(even) {
    background-color: #f8f9f9;
}

tr:hover {
    background-color: #ebf5fb;
}

code {
    background-color: #f4f6f7;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 10pt;
}

pre {
    background-color: #2c3e50;
    color: #ecf0f1;
    padding: 15px;
    border-radius: 5px;
    overflow-x: auto;
    font-size: 9pt;
    line-height: 1.4;
}

pre code {
    background-color: transparent;
    padding: 0;
    color: inherit;
}

blockquote {
    border-left: 4px solid #3498db;
    margin: 15px 0;
    padding: 10px 20px;
    background-color: #ebf5fb;
}

hr {
    border: none;
    border-top: 2px solid #eaecee;
    margin: 30px 0;
}

ul, ol {
    padding-left: 25px;
}

li {
    margin-bottom: 5px;
}

strong {
    color: #1a5276;
}

.header-info {
    background-color: #eaf2f8;
    padding: 15px;
    border-radius: 5px;
    margin-bottom: 20px;
    border-left: 4px solid #2874a6;
}

.fecha-generacion {
    text-align: right;
    color: #7f8c8d;
    font-size: 9pt;
    margin-top: 30px;
    padding-top: 10px;
    border-top: 1px solid #eee;
}

    </style>
</head>
<body>
    <div class="header-info">
        <strong>ModuloRRHH</strong> - Pescados La Carihuela<br>
        <small>Documento: MODULO RRHH - TRABAJADORES</small>
    </div>

<h1>MODULO RRHH - TRABAJADORES</h1>
<h2>1. Clasificacion de Trabajadores (4 Niveles)</h2>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│ NIVEL 1: TRABAJADORES CON CONTRATO                                         │
│ Todos con contrato en vigor (incluidos excedencia)                          │
└─────────────────────────────────────────────────────────────────────────────┘
                              │
                              ▼ (menos excedencias)
┌─────────────────────────────────────────────────────────────────────────────┐
│ NIVEL 2: TRABAJADORES ACTUALES                                              │
│ Sin excedencia                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                              │
                              ▼ (menos baja larga duracion)
┌─────────────────────────────────────────────────────────────────────────────┐
│ NIVEL 3: ELEGIBLES VACACIONES                                               │
│ Sin baja larga duracion → Selector de vacaciones                            │
│ (Paternidad/maternidad SI son elegibles)                                    │
└─────────────────────────────────────────────────────────────────────────────┘
                              │
                              ▼ (menos paternidad/mat. + vacaciones + baja corta + permisos)
┌─────────────────────────────────────────────────────────────────────────────┐
│ NIVEL 4: CUADRANTE / CONTROL DE PRESENCIA                                   │
│ Disponibles para trabajar el dia seleccionado                               │
│ (PENDIENTE DE DESARROLLO)                                                   │
└─────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<table>
<thead>
<tr>
<th>Nivel</th>
<th>Nombre</th>
<th>Excluye</th>
<th>Uso</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Trabajadores con Contrato</td>
<td>-</td>
<td>Base</td>
</tr>
<tr>
<td>2</td>
<td>Trabajadores Actuales</td>
<td>Excedencia</td>
<td>General</td>
</tr>
<tr>
<td>3</td>
<td>Elegibles Vacaciones</td>
<td>Baja larga</td>
<td>Selector vacaciones</td>
</tr>
<tr>
<td>4</td>
<td>Cuadrante/Control Presencia</td>
<td>Patern/matern, vacaciones, baja corta, permisos</td>
<td>Horarios</td>
</tr>
</tbody>
</table>
<hr />
<h2>2. Definicion de Trabajador Activo</h2>
<p>Un trabajador se considera "dado de alta" o "con contrato en vigor" cuando tiene un registro activo en la tabla <code>contratos_usuario</code> que cumple:</p>
<ul>
<li>El contrato no ha sido eliminado (<code>deleted_at IS NULL</code>)</li>
<li>La fecha de fin es nula (contrato indefinido) o es igual o posterior a la fecha actual (<code>fecha_fin IS NULL OR fecha_fin &gt;= CURDATE()</code>)</li>
</ul>
<hr />
<h2>3. Gestion de Ausencias</h2>
<h3>3.1 Tablas de Ausencias</h3>
<table>
<thead>
<tr>
<th>Tabla</th>
<th>Descripcion</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nuevo_carihuela_jorge_excedencia</code></td>
<td>Excedencias voluntarias</td>
</tr>
<tr>
<td><code>nuevo_carihuela_jorge_bajas_larga_duracion</code></td>
<td>Bajas con sustituto asignado</td>
</tr>
<tr>
<td><code>nuevo_carihuela_jorge_paternidad_maternidad</code></td>
<td>Permisos paternidad/maternidad</td>
</tr>
<tr>
<td><code>nuevo_carihuela_jorge_lactancia</code></td>
<td>Permisos de lactancia</td>
</tr>
</tbody>
</table>
<hr />
<h2>4. Bajas de Larga Duracion</h2>
<h3>4.1 Definicion</h3>
<table>
<thead>
<tr>
<th>Tipo de Baja</th>
<th>Condicion</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Corta duracion</strong></td>
<td>&lt; 30 dias naturales</td>
</tr>
<tr>
<td><strong>Larga duracion</strong></td>
<td>&gt;= 30 dias naturales</td>
</tr>
</tbody>
</table>
<p><strong>Nota:</strong> A partir del dia 30 de baja, se considera automaticamente como baja de larga duracion.</p>
<h3>4.2 Alerta Automatica (&gt;=30 dias)</h3>
<p>Cuando un trabajador lleva <strong>30 dias o mas de baja</strong>, el sistema genera una <strong>alerta automatica</strong>:</p>
<table>
<thead>
<tr>
<th>Campo</th>
<th>Valor</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Condicion</strong></td>
<td>Trabajador con &gt;=30 dias de baja sin sustituto asignado</td>
</tr>
<tr>
<td><strong>Mensaje</strong></td>
<td>"El trabajador [Nombre] lleva 30 dias de baja y deberia tener un sustituto"</td>
</tr>
<tr>
<td><strong>Destinatario</strong></td>
<td>Hermi (por correo electronico)</td>
</tr>
<tr>
<td><strong>Otros destinatarios</strong></td>
<td>Pendiente de definir</td>
</tr>
<tr>
<td><strong>Frecuencia</strong></td>
<td>Diaria hasta que se asigne sustituto</td>
</tr>
</tbody>
</table>
<pre><code>+============================================================================+
|  [!] ALERTA - BAJA LARGA DURACION SIN SUSTITUTO                            |
+============================================================================+
|                                                                             |
|  El trabajador Francisco Cabello (097) lleva 30 dias de baja.              |
|  Fecha inicio baja: 19/09/2025                                              |
|  Dias de baja: 30                                                           |
|                                                                             |
|  ACCION REQUERIDA: Asignar sustituto                                        |
|                                                                             |
|  [Asignar sustituto]  [Ver detalle]                                         |
|                                                                             |
+============================================================================+
</code></pre>
<h3>4.3 Tabla de Bajas Larga Duracion Actuales</h3>
<pre><code>┌────┬─────┬──────────────────────────┬─────┬──────────────────────────┬────────────┐
│ ID │ Cod │ Trabajador en Baja       │ Cod │ Sustituto                │ Desde      │
├────┼─────┼──────────────────────────┼─────┼──────────────────────────┼────────────┤
│ 1  │ 097 │ Francisco Cabello        │ 216 │ Maria Leon               │ 19/09/2025 │
├────┼─────┼──────────────────────────┼─────┼──────────────────────────┼────────────┤
│ 3  │ 038 │ Soledad Leon             │ 259 │ Hugo Aguilar             │ 29/09/2025 │
├────┼─────┼──────────────────────────┼─────┼──────────────────────────┼────────────┤
│ 4  │ 005 │ Fernando Rafael Torralbo │ 258 │ Angel Encinas            │ 13/11/2025 │
├────┼─────┼──────────────────────────┼─────┼──────────────────────────┼────────────┤
│ 2  │ 078 │ Monica Quesada           │ 255 │ Alejandro Leon           │ 02/01/2026 │
└────┴─────┴──────────────────────────┴─────┴──────────────────────────┴────────────┘
</code></pre>
<h3>4.4 Estructura Tabla Base de Datos</h3>
<p>Tabla: <code>nuevo_carihuela_jorge_bajas_larga_duracion</code></p>
<table>
<thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripcion</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>INT</td>
<td>Identificador unico</td>
</tr>
<tr>
<td>id_trabajador</td>
<td>INT</td>
<td>Codigo del trabajador en baja</td>
</tr>
<tr>
<td>id_sustituto</td>
<td>INT</td>
<td>Codigo del sustituto asignado</td>
</tr>
<tr>
<td>fecha_desde</td>
<td>DATE</td>
<td>Fecha inicio de la baja</td>
</tr>
<tr>
<td>fecha_hasta</td>
<td>DATE NULL</td>
<td>Fecha fin (NULL si continua)</td>
</tr>
<tr>
<td>motivo</td>
<td>VARCHAR</td>
<td>Motivo de la baja</td>
</tr>
<tr>
<td>observaciones</td>
<td>TEXT</td>
<td>Observaciones adicionales</td>
</tr>
</tbody>
</table>
<h3>4.5 Notas Importantes</h3>
<ul>
<li>Las bajas de larga duracion (&gt;= 30 dias) requieren asignacion de sustituto</li>
<li>El trabajador en baja larga NO es elegible para el selector de vacaciones (Nivel 3)</li>
<li>Al registrar una baja larga, se cancelan automaticamente las vacaciones planificadas</li>
<li>El sustituto debe tener un contrato de sustitucion vinculado al trabajador en baja</li>
</ul>
<hr />
<h2>5. Bajas Corta Duracion</h2>
<p>Las bajas de corta duracion se gestionan a traves del <strong>Control de Presencia</strong> en la tabla <code>eventos_incidencias_colores</code>:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Nombre</th>
<th>Iniciales</th>
</tr>
</thead>
<tbody>
<tr>
<td>66</td>
<td>Baja</td>
<td>Baj</td>
</tr>
<tr>
<td>68</td>
<td>Baja S/Justificar</td>
<td>Bsj</td>
</tr>
<tr>
<td>67</td>
<td>Trabajado (Sin Ticada)</td>
<td>Tst</td>
</tr>
<tr>
<td>65</td>
<td>Vacaciones</td>
<td>Vac</td>
</tr>
</tbody>
</table>
<p><strong>Nota:</strong> "Baja" (id 66) corresponde a <strong>Baja Corta Duracion</strong>.</p>
<hr />
<h2>6. Excedencias</h2>
<h3>6.1 Excedencias Actuales</h3>
<pre><code>┌─────┬─────────────────────────────┬────────────┬────────────┬───────────────────────┐
│ Cod │ Nombre Completo             │ Desde      │ Hasta      │ Tipo                  │
├─────┼─────────────────────────────┼────────────┼────────────┼───────────────────────┤
│ 280 │ Pedro Moya Moya             │ 25/03/2025 │ 25/03/2026 │ Excedencia voluntaria │
├─────┼─────────────────────────────┼────────────┼────────────┼───────────────────────┤
│ 077 │ Pablo Javier Nunez Fierro   │ 31/05/2025 │ 31/05/2026 │ Excedencia voluntaria │
├─────┼─────────────────────────────┼────────────┼────────────┼───────────────────────┤
│ 011 │ Jose Maria Aguilar Serrano  │ 03/09/2025 │ 03/09/2026 │ Excedencia voluntaria │
├─────┼─────────────────────────────┼────────────┼────────────┼───────────────────────┤
│ 050 │ Francisco Luz Romero        │ 31/10/2025 │ 31/10/2026 │ Excedencia voluntaria │
└─────┴─────────────────────────────┴────────────┴────────────┴───────────────────────┘
</code></pre>
<hr />
<h2>7. Paternidad/Maternidad</h2>
<h3>7.1 Estructura</h3>
<ul>
<li>Fecha de nacimiento del hijo</li>
<li>Periodo obligatorio: 6 semanas desde nacimiento</li>
<li>Periodo optativo: 13 semanas (a disfrutar antes de que el hijo cumpla 1 año)</li>
<li>Total: 19 semanas</li>
</ul>
<hr />
<h2>8. Lactancia</h2>
<h3>8.1 Tipos disponibles</h3>
<table>
<thead>
<tr>
<th>Tipo</th>
<th>Descripcion</th>
</tr>
</thead>
<tbody>
<tr>
<td>AUSENCIA_1_HORA</td>
<td>Ausencia de 1 hora diaria</td>
</tr>
<tr>
<td>REDUCCION_JORNADA</td>
<td>Reduccion de jornada</td>
</tr>
<tr>
<td>ACUMULACION_DIAS</td>
<td>Acumulacion de dias completos</td>
</tr>
</tbody>
</table>
<hr />
<h2>9. Vacaciones</h2>
<h3>9.1 Tipos</h3>
<table>
<thead>
<tr>
<th>Tipo</th>
<th>Descripcion</th>
</tr>
</thead>
<tbody>
<tr>
<td>INVIERNO</td>
<td>Vacaciones periodo invernal</td>
</tr>
<tr>
<td>VERANO</td>
<td>Vacaciones periodo estival</td>
</tr>
</tbody>
</table>
<h3>9.2 Estados</h3>
<table>
<thead>
<tr>
<th>Estado</th>
<th>Descripcion</th>
</tr>
</thead>
<tbody>
<tr>
<td>PENDIENTE</td>
<td>Solicitud enviada, pendiente de aprobacion</td>
</tr>
<tr>
<td>APROBADA</td>
<td>Vacaciones aprobadas</td>
</tr>
<tr>
<td>RECHAZADA</td>
<td>Solicitud rechazada</td>
</tr>
<tr>
<td>CANCELADA</td>
<td>Vacaciones canceladas</td>
</tr>
</tbody>
</table>
<h3>9.3 Balance Anual</h3>
<ul>
<li>Dias correspondientes: 30 dias/año</li>
<li>Dias invierno: Segun solicitud</li>
<li>Dias verano: Segun solicitud</li>
<li>Dias pendientes: Calculado automaticamente</li>
</ul>
<hr />
<h2>10. Representantes Sindicales</h2>
<h3>10.1 Representantes Actuales</h3>
<table>
<thead>
<tr>
<th>Codigo</th>
<th>Nombre</th>
<th>Sindicato</th>
</tr>
</thead>
<tbody>
<tr>
<td>110</td>
<td>Alejandro Moreno</td>
<td>UGT</td>
</tr>
<tr>
<td>019</td>
<td>Silvia Sierra</td>
<td>UGT</td>
</tr>
<tr>
<td>164</td>
<td>Clara Munoz</td>
<td>CCOO</td>
</tr>
<tr>
<td>094</td>
<td>Rafael Espejo</td>
<td>INDEPENDIENTE</td>
</tr>
<tr>
<td>160</td>
<td>Carlos Fernandez</td>
<td>INDEPENDIENTE</td>
</tr>
</tbody>
</table>
<h3>10.2 Horas Sindicales</h3>
<p>Los representantes sindicales tienen derecho a horas de credito horario sindical que se registran mensualmente.</p>
<hr />
<h2>11. Jornada Laboral</h2>
<h3>11.1 Distribucion</h3>
<table>
<thead>
<tr>
<th>Horas/semana</th>
<th>Trabajadores</th>
</tr>
</thead>
<tbody>
<tr>
<td>40 horas</td>
<td>67</td>
</tr>
<tr>
<td>28 horas</td>
<td>3</td>
</tr>
<tr>
<td>24 horas</td>
<td>1</td>
</tr>
</tbody>
</table>
<hr />
<h2>12. Categorias Profesionales</h2>
<h3>12.1 Distribucion por grupos</h3>
<table>
<thead>
<tr>
<th>Grupo</th>
<th>Categoria</th>
<th>Total</th>
</tr>
</thead>
<tbody>
<tr>
<td>I</td>
<td>Directores/as y Responsables Tecnicos</td>
<td>5</td>
</tr>
<tr>
<td>II</td>
<td>Administrativos (A-1, A-2)</td>
<td>3</td>
</tr>
<tr>
<td>III</td>
<td>Logistica (L-1, L-2, L-3)</td>
<td>4</td>
</tr>
<tr>
<td>IV</td>
<td>Pescaderia (P-2, P-3)</td>
<td>7</td>
</tr>
<tr>
<td>V</td>
<td>Tecnicos (T-0, T-1, T-2, T-3, Lider)</td>
<td>52</td>
</tr>
</tbody>
</table>
<hr />
<p><em>Documento generado: ModuloRRHH v1.0</em></p>

    <div class="fecha-generacion">
        Generado: 19/02/2026 06:35
    </div>
</body>
</html>
