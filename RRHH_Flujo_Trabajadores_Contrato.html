<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RRHH - Flujo de Trabajadores con Contrato - Pescados La Carihuela</title>
    <style>
        :root { --primary: #2c3e50; --secondary: #3498db; --success: #27ae60; --warning: #f39c12; --danger: #e74c3c; --light: #ecf0f1; }
        * { box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; line-height: 1.6; color: #333; max-width: 1400px; margin: 0 auto; padding: 20px; background: #f5f5f5; }
        h1 { color: var(--primary); border-bottom: 3px solid var(--secondary); padding-bottom: 10px; }
        h2 { color: var(--primary); background: var(--light); padding: 10px 15px; border-left: 4px solid var(--secondary); margin-top: 30px; }
        h3 { color: var(--secondary); margin-top: 25px; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; background: white; box-shadow: 0 1px 3px rgba(0,0,0,0.1); font-size: 13px; }
        th, td { border: 1px solid #ddd; padding: 8px 10px; text-align: left; }
        th { background: var(--primary); color: white; font-weight: 600; }
        tr:nth-child(even) { background: #f9f9f9; }
        tr:hover { background: #f0f7ff; }
        .badge { display: inline-block; padding: 3px 8px; border-radius: 3px; font-size: 11px; font-weight: bold; }
        .badge-pendiente { background: #ffc107; color: #333; }
        .badge-activo { background: #28a745; color: white; }
        .badge-baja { background: #dc3545; color: white; }
        .badge-excedencia { background: #6c757d; color: white; }
        pre { background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto; font-size: 12px; }
        code { background: #e8e8e8; padding: 2px 6px; border-radius: 3px; font-family: Consolas, monospace; }
        .header-info { background: var(--primary); color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .resumen-box { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 20px 0; }
        .resumen-item { background: white; padding: 15px; border-radius: 8px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-top: 4px solid var(--secondary); }
        .resumen-item .numero { font-size: 2em; font-weight: bold; color: var(--primary); }
        .nota { background: #d1ecf1; border: 1px solid #17a2b8; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .pendiente { background: #fff3cd; border: 1px solid #ffc107; padding: 10px; border-radius: 5px; margin: 10px 0; }
        @media print { body { background: white; } }
    </style>
</head>
<body>

<div class="header-info">
    <h1>FLUJO DE TRABAJADORES CON CONTRATO EN VIGOR</h1>
    <p><strong>Modulo RRHH - Pescados La Carihuela</strong></p>
    <p>Fecha: 2026-02-17 | Elaborado por: Jorge Castillo | Version: PRODUCCION</p>
</div>

<h2>Resumen: Clasificacion de Trabajadores (4 Niveles)</h2>
<div class="resumen-box">
    <div class="resumen-item"><h3>NIVEL 1</h3><div class="numero">71</div><p>Trabajadores con Contrato</p></div>
    <div class="resumen-item"><h3>NIVEL 2</h3><div class="numero">67</div><p>Trabajadores Actuales</p></div>
    <div class="resumen-item"><h3>NIVEL 3</h3><div class="numero">63</div><p>Elegibles Vacaciones</p></div>
    <div class="resumen-item"><h3>NIVEL 4</h3><div class="numero">?</div><p>Cuadrante <span class="badge badge-pendiente">PENDIENTE</span></p></div>
</div>

<table>
<tr><th>Nivel</th><th>Nombre</th><th>Excluye</th><th>Uso</th></tr>
<tr><td>1</td><td>Trabajadores con Contrato</td><td>-</td><td>Base</td></tr>
<tr><td>2</td><td>Trabajadores Actuales</td><td>Excedencia</td><td>General</td></tr>
<tr><td>3</td><td>Elegibles Vacaciones</td><td>Baja larga</td><td>Selector vacaciones</td></tr>
<tr><td>4</td><td>Cuadrante/Control Presencia</td><td>Patern/matern, vacaciones, baja corta, permisos</td><td>Horarios</td></tr>
</table>

<h2>Vista Nivel 1: Trabajadores con Contrato</h2>
<p><strong>Listado con columnas ordenables (71 trabajadores):</strong></p>
<table>
<tr><th>Cod</th><th>Nombre</th><th>Apellidos</th><th>NomCorto</th><th>Horas</th><th>F.Inicio</th><th>F.Fin</th><th>CodContr</th><th>TipoContr</th><th>Estado</th><th>Desde</th><th>Hasta</th></tr>
<tr><td>110</td><td>Alejandro</td><td>Moreno Blanes</td><td>A. Moreno</td><td>40</td><td>01/08/2019</td><td>Indefinido</td><td>100</td><td>Indefinido</td><td><span class="badge badge-activo">Activo</span></td><td></td><td></td></tr>
<tr><td>111</td><td>Cristina</td><td>Moraleda Cerrato</td><td>C. Morale.</td><td>40</td><td>15/03/2020</td><td>Indefinido</td><td>100</td><td>Indefinido</td><td><span class="badge badge-activo">Activo</span></td><td></td><td></td></tr>
<tr><td>038</td><td>Soledad</td><td>Leon Fernandez</td><td>S. Leon</td><td>40</td><td>01/01/2015</td><td>Indefinido</td><td>100</td><td>Indefinido</td><td><span class="badge badge-excedencia">Excedencia</span></td><td>01/02/2026</td><td>01/08/2026</td></tr>
<tr><td>097</td><td>Francisco</td><td>Cabello Sanchez</td><td>F. Cabello</td><td>40</td><td>01/06/2018</td><td>Indefinido</td><td>100</td><td>Indefinido</td><td><span class="badge badge-baja">Baja larga</span></td><td>15/01/2026</td><td></td></tr>
<tr><td>257</td><td>Jose Antonio</td><td>Velasco Madrid</td><td>J. Velasco</td><td>40</td><td>13/01/2026</td><td>12/04/2026</td><td>200</td><td>Temporal</td><td><span class="badge badge-activo">Activo</span></td><td></td><td></td></tr>
</table>
<p><em>... (ejemplo de 5 trabajadores, documento completo tiene 71)</em></p>

<h2>Trabajadores en Excedencia (4)</h2>
<table>
<tr><th>Cod</th><th>Nombre Completo</th><th>Desde</th><th>Hasta</th><th>Tipo</th></tr>
<tr><td>280</td><td>Pedro Moya Moya</td><td>25/03/2025</td><td>25/03/2026</td><td>Excedencia voluntaria</td></tr>
<tr><td>077</td><td>Pablo Javier Nunez Fierro</td><td>31/05/2025</td><td>31/05/2026</td><td>Excedencia voluntaria</td></tr>
<tr><td>011</td><td>Jose Maria Aguilar Serrano</td><td>03/09/2025</td><td>03/09/2026</td><td>Excedencia voluntaria</td></tr>
<tr><td>050</td><td>Francisco Luz Romero</td><td>31/10/2025</td><td>31/10/2026</td><td>Excedencia voluntaria</td></tr>
</table>

<h2>Bajas Larga Duracion (4)</h2>
<table>
<tr><th>ID</th><th>Cod</th><th>Trabajador en Baja</th><th>Cod</th><th>Sustituto</th><th>Desde</th></tr>
<tr><td>1</td><td>097</td><td>Francisco Cabello</td><td>216</td><td>Maria Leon</td><td>19/09/2025</td></tr>
<tr><td>3</td><td>038</td><td>Soledad Leon</td><td>259</td><td>Hugo Aguilar</td><td>29/09/2025</td></tr>
<tr><td>4</td><td>005</td><td>Fernando Rafael Torralbo</td><td>258</td><td>Angel Encinas</td><td>13/11/2025</td></tr>
<tr><td>2</td><td>078</td><td>Monica Quesada</td><td>255</td><td>Alejandro Leon</td><td>02/01/2026</td></tr>
</table>

<h2>Vista Nivel 3: Vacaciones 2026 (Resumen anual)</h2>
<table>
<tr><th>ID</th><th>Nombre</th><th>Apellidos</th><th>Inv P1 Desde</th><th>Inv P1 Hasta</th><th>Tot P1</th><th>Inv P2 Desde</th><th>Inv P2 Hasta</th><th>Tot P2</th><th>Ver P1 Desde</th><th>Ver P1 Hasta</th><th>Tot V1</th><th>Dias Totales</th><th>Dias Corresp</th><th>Difer</th></tr>
<tr><td>110</td><td>Alejandro</td><td>Moreno Blanes</td><td>02/02/2026</td><td>16/02/2026</td><td>15</td><td></td><td></td><td>0</td><td></td><td></td><td>0</td><td>15</td><td>30</td><td>-15</td></tr>
<tr><td>059</td><td>Francisco</td><td>Soto Alcolea</td><td>02/02/2026</td><td>16/02/2026</td><td>15</td><td></td><td></td><td>0</td><td>03/08/2026</td><td>17/08/2026</td><td>15</td><td>30</td><td>30</td><td>0</td></tr>
<tr><td>111</td><td>Cristina</td><td>Moraleda Cerrato</td><td>10/02/2026</td><td>17/02/2026</td><td>8</td><td>10/03/2026</td><td>17/03/2026</td><td>8</td><td>03/08/2026</td><td>10/08/2026</td><td>8</td><td>30</td><td>30</td><td>0</td></tr>
</table>
<p class="nota"><strong>NOTA:</strong> Puede haber mas periodos (P3, P4...) segun necesidades del trabajador.</p>

<h2>Campos del Formulario Nivel 1</h2>
<table>
<tr><th>Campo</th><th>Tipo</th><th>Descripcion</th></tr>
<tr><td>Codigo</td><td>Texto</td><td>Codigo del trabajador</td></tr>
<tr><td>Nombre</td><td>Texto</td><td>Nombre del trabajador</td></tr>
<tr><td>Apellidos</td><td>Texto</td><td>Apellidos del trabajador</td></tr>
<tr><td>Nombre corto</td><td>Texto</td><td>Nombre abreviado para vacaciones y cuadrante</td></tr>
<tr><td>Fecha inicio</td><td>Fecha</td><td>Fecha inicio contrato actual</td></tr>
<tr><td>Fecha fin</td><td>Fecha</td><td>Fecha fin contrato (vacio si indefinido)</td></tr>
<tr><td>Centro de coste</td><td>Dropdown</td><td>Selector de centro de coste</td></tr>
<tr><td>Horas semanales</td><td>Numero</td><td>Horas de jornada semanal</td></tr>
<tr><td>Categoria</td><td>Dropdown</td><td>Categoria profesional</td></tr>
<tr><td>Tipo contrato</td><td>Dropdown</td><td>Indefinido / Temporal</td></tr>
</table>

<h3>Casillas de situacion (Estado):</h3>
<table>
<tr><th>Estado</th><th>Campos</th><th>Descripcion</th></tr>
<tr><td>Excedencia</td><td>Desde, Hasta</td><td>Periodo de excedencia voluntaria</td></tr>
<tr><td>Baja larga</td><td>Desde, Sustituto</td><td>Baja de larga duracion (sin fecha fin) con sustituto</td></tr>
<tr><td>Paternidad/Maternidad</td><td>Desde, Hasta</td><td>Permiso por nacimiento/adopcion</td></tr>
</table>

<h2>Resumen de Pendientes para Produccion</h2>
<table>
<tr><th>#</th><th>Modulo</th><th>Descripcion</th><th>Prioridad</th></tr>
<tr><td>1</td><td>Calendario</td><td>Confirmar si domingos y festivos son laborables</td><td><span class="badge badge-baja">ALTA</span></td></tr>
<tr><td>2</td><td>Nivel 4</td><td>Desarrollar vista Cuadrante/Control de Presencia</td><td><span class="badge badge-baja">ALTA</span></td></tr>
<tr><td>3</td><td>Vacaciones</td><td>Interfaz de usuario para solicitud de vacaciones</td><td><span class="badge badge-baja">ALTA</span></td></tr>
<tr><td>4</td><td>Vacaciones</td><td>Validar maximo 5 trabajadores simultaneos</td><td><span class="badge badge-baja">ALTA</span></td></tr>
<tr><td>5</td><td>Vacaciones</td><td>Comparacion con ano anterior</td><td><span class="badge badge-pendiente">MEDIA</span></td></tr>
<tr><td>6</td><td>Ausencias</td><td>Vincular eventos_incidencias_colores con tablas</td><td><span class="badge badge-pendiente">MEDIA</span></td></tr>
<tr><td>7</td><td>Sindicales</td><td>Automatizar solicitud credito horario por email</td><td><span class="badge badge-activo">BAJA</span></td></tr>
</table>

<h3>Tablas a Crear (en orden)</h3>
<pre>
1. nuevo_carihuela_jorge_configuracion_calendario
2. nuevo_carihuela_jorge_calendario_anual
3. nuevo_carihuela_jorge_semanas_anuales
4. nuevo_carihuela_jorge_vacaciones
5. nuevo_carihuela_jorge_vacaciones_balance
6. nuevo_carihuela_jorge_vacaciones_solicitudes
7. nuevo_carihuela_jorge_vacaciones_canceladas
</pre>

<h3>Procedimientos a Ejecutar</h3>
<pre>
-- Ejecutar cada ano nuevo:
CALL generar_calendario_anual(2026);
CALL generar_semanas_anuales(2026);
</pre>

<hr>
<p><strong>Archivos relacionados:</strong></p>
<ul>
<li><code>C:\Users\usuario\RRHH_Flujo_Trabajadores_Contrato.md</code> - Documento completo (2278 lineas)</li>
<li><code>C:\Users\usuario\vacaciones_2026.txt</code> - Datos de vacaciones</li>
</ul>
<p><strong>Documento generado:</strong> 2026-02-17 | <strong>Version:</strong> PRODUCCION</p>

</body>
</html>
